---
title: mysql数据库索引原理btree和b+tree
date: 2019-10-27 22:15:02
tags: 数据库
categories: 数据库
---

# 前言

大家或多或少都知道索引用来提高数据库查询速度，缺点是影响其他非查询的数据库操作速度。

为什么 老子不知道 我就摸摸底层

数据库的底层多采用b+tree

如果数据库底层就一个很普通的键值存储结构

一个很简单的查询 select  * from 表 where 主键id=xxx  

此表有一亿条数据

那么数据库在这种结构下 是需要执行最多一亿次轮询查询比较 

用代码表示if yyy==xxx return

那么就是最多一亿次的磁盘io读取操作 ，这对磁盘的资源占用和查询速度的影响是恐怖的。

# 梳理

1. MySQL官方对于索引的定义为：索引是帮助MySQL高效获取数据的数据结构。即：索引是数据结构。 

2. 为了提高查询速度，数据库设计师肯定要从数据库轮询算法的角度进行优化、 最基本的查询算法当然是顺序查找（linear search），这种复杂度为O(n)的算法在数据量很大时显然是糟糕的，好在计算机科学的发展提供了很多更优秀的查找算法，例如二分查找（binary search）、二叉树查找（binary tree search）等。如果稍微分析一下会发现，每种查找算法都只能应用于特定的数据结构之上，例如二分查找要求被检索数据有序，而二叉树查找只能应用于二叉查找树上，但是数据本身的组织结构不可能完全满足各种数据结构（例如，理论上不可能同时将两列都按顺序进行组织），所以，在数据之外，数据库系统还维护着满足特定查找算法的数据结构，这些数据结构以某种方式引用（指向）数据，这样就可以在这些数据结构上实现高级查找算法。这种数据结构，就是索引。   

3. 二叉排数树>二叉平衡数->btree->b+tree

# 二叉排序树

可以吧这个树看作是btree的前身；

- 若左子树不空，则左子树上所有节点的值均小于它的根节点的值
- 若右子树不空，则右字数上所有节点的值均大于它的根节点的值
- 它的左、右子树也分别为二叉排序数（递归定义）
- ![1572187116985](mysql数据库索引原理btree和b-tree\1572187116985.png)

  ![img](https://img-blog.csdn.net/20180911102734584?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2E3NjQzNDA3MDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70) 

 二叉排序树组织数据时，用于查找是比较方便的，因为每次经过一次节点时，最多可以减少一半的可能，不过极端情况会出现所有节点都位于同一侧，直观上看就是一条直线，那么这种查询的效率就比较低了，因此需要对二叉树左右子树的高度进行平衡化处理，于是就有了平衡二叉树（Balenced Binary Tree）。 

# 平衡二叉树（AVL Tree）

 **平衡二叉树（AVL树）在符合二叉查找树的条件下，还满足任何节点的两个子树的高度最大差为1。** 左边是AVL树，它的任何节点的两个子树的高度差<=1；右边的不是AVL树，其根节点的左子树高度为3，而右子树高度为1； 

 ![img](https://img-blog.csdn.net/20180911102724650?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2E3NjQzNDA3MDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70) 

但是要对树进行插入或删除的操作会打破平衡，可通过旋转让平衡树恢复平衡

这里不深入去学习了，有兴趣这里查看

 https://blog.csdn.net/a764340703/article/details/82621781 

# 平衡多路查找树（B-Tree）

未完待续！！！